Index: login.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import time\nimport requests\nfrom tkinter import Tk, Label\nfrom PIL import ImageTk, Image\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as ec\n\ndef login(url, driver, status, username, password):\n    if not status:\n        print(\"登录无需验证,正在登录...\")\n        WebDriverWait(driver, 10).until(\n            ec.element_to_be_clickable((By.ID, \"userNameLogin_a\"))\n        ).click()\n        driver.find_element(By.ID, \"username\").send_keys(username)\n        driver.find_element(By.ID, \"password\").send_keys(password)\n        driver.find_element(By.ID, \"login_submit\").click()\n        time.sleep(1)\n        res = requests.get(url, cookies={c['name']: c['value'] for c in driver.get_cookies()})\n        if res.status_code == 200:\n            verified_cookies = {c['name']: c['value'] for c in driver.get_cookies()}\n            return True, verified_cookies\n\n    print(\"账号密码登录暂时不可用，请用企业微信扫码登录。\")\n    driver.find_element(By.ID, \"qrLogin_a\").click()\n    time.sleep(1)\n    driver.set_window_size(1920, 1080)\n    elem = driver.find_element(By.ID, \"qr_img\")\n    elem.screenshot(\"cache/qr_code.png\")\n    root = Tk()\n    img = Image.open(\"cache/qr_code.png\")\n    tk_img = ImageTk.PhotoImage(img)\n    Label(root, image=tk_img).pack()\n    root.mainloop()\n    res = requests.get(url, cookies={c['name']: c['value'] for c in driver.get_cookies()})\n    if res.status_code == 200:\n        verified_cookies = {c['name']: c['value'] for c in driver.get_cookies()}\n        return True, verified_cookies\n\n    return False, None\n
===================================================================
diff --git a/login.py b/login.py
--- a/login.py	(revision 28d6b594a1f2d1b7754deed5b50faf996888e5e0)
+++ b/login.py	(date 1762236911535)
@@ -1,7 +1,7 @@
 import time
 import requests
-from tkinter import Tk, Label
-from PIL import ImageTk, Image
+# from tkinter import Tk, Label
+# from PIL import ImageTk, Image
 from selenium.webdriver.common.by import By
 from selenium.webdriver.support.ui import WebDriverWait
 from selenium.webdriver.support import expected_conditions as ec
@@ -21,20 +21,20 @@
             verified_cookies = {c['name']: c['value'] for c in driver.get_cookies()}
             return True, verified_cookies
 
-    print("账号密码登录暂时不可用，请用企业微信扫码登录。")
-    driver.find_element(By.ID, "qrLogin_a").click()
-    time.sleep(1)
-    driver.set_window_size(1920, 1080)
-    elem = driver.find_element(By.ID, "qr_img")
-    elem.screenshot("cache/qr_code.png")
-    root = Tk()
-    img = Image.open("cache/qr_code.png")
-    tk_img = ImageTk.PhotoImage(img)
-    Label(root, image=tk_img).pack()
-    root.mainloop()
-    res = requests.get(url, cookies={c['name']: c['value'] for c in driver.get_cookies()})
-    if res.status_code == 200:
-        verified_cookies = {c['name']: c['value'] for c in driver.get_cookies()}
-        return True, verified_cookies
+    # print("账号密码登录暂时不可用，请用企业微信扫码登录。")
+    # driver.find_element(By.ID, "qrLogin_a").click()
+    # time.sleep(1)
+    # driver.set_window_size(1920, 1080)
+    # elem = driver.find_element(By.ID, "qr_img")
+    # elem.screenshot("cache/qr_code.png")
+    # root = Tk()
+    # img = Image.open("cache/qr_code.png")
+    # tk_img = ImageTk.PhotoImage(img)
+    # Label(root, image=tk_img).pack()
+    # root.mainloop()
+    # res = requests.get(url, cookies={c['name']: c['value'] for c in driver.get_cookies()})
+    # if res.status_code == 200:
+    #     verified_cookies = {c['name']: c['value'] for c in driver.get_cookies()}
+    #     return True, verified_cookies
 
     return False, None
